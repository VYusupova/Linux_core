## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ gitlab-runner

<details>
<summary> –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ  </summary> 
 
##### 1. –ü–æ–¥–Ω—è—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É *Ubuntu Server 22.04 LTS*.
##### 2. –°–∫–∞—á–∞–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É *gitlab-runner*.  

<details>
<summary>  —É–¥–∞–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ  </summary>
 
–û—Ä–∞–≥–Ω–∏–∑–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: –¥–æ—Å—Ç—É–ø –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤–∏—Ä—Ç—É–∞–ª–∫–∏ —Å —Ö–æ—Å—Ç–∞ –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —á—Ç–æ –±—ã –≤—Ä—É—á–Ω—É—é –Ω–µ –≤–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —Ä–µ–≥–∏—Å—Ç–∞—Ä—Ü–∏–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ *gitlab-runner*  
-  –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –≤—ã–±—Ä–∞—Ç—å –∞–¥–ø—Ç–µ—Ä —Å–µ—Ç–µ–≤–æ–π –º–æ—Å—Ç.   
`ip a` - –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∞–¥—Ä–µ—Å, –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É –ø—Ä–æ–ø–∏–Ω–≥–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω—ã –ø–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å, –∏–ª–∏ —Å —Ö–æ—Å—Ç–∞ —Ç–∞–∫ –∂–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–∏–Ω–≥

> –í–∫–ª—é—á–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π `Ctr+Alt+T`

 - –ø—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ `ssh` —Ä–∞–±–æ—Ç–∞–µ—Ç - `sudo systemctl status sshd`  
 - –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–µ—Ç –≤–∫–ª—é—á–∏—Ç—å - `sudo apt-get install ssh` -  —Ä–∞—Å–∫–æ–º–∏—Ç–∏—Ç—å 22 –ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª–µ `/etc/ssh/sshd_config`   
-  –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å —É–¥–∞–ª–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã –∫–æ–º–∞–Ω–¥–æ–π - `ssh <username>@<ipname>` - –≤–≤–µ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ   
- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `gitlab runner` *https://docs.gitlab.com/runner/install/linux-repository/*     

> `gitlab-runner status` - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ GitLab Runner.
> –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–∏—à–µ–º exit 


</details>

##### 3. –ó–∞–ø—É—Å—Ç–∏ gitlab-runner –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –µ–≥–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ (DO6_CICD).

–î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è `URL` –∏ —Ç–æ–∫–µ–Ω

<details>
<summary>  –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è GitLab Runner: </summary>

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `gitlab-runner register`  
2. –í–≤–µ–¥–∏—Ç–µ `URL` –≤–∞—à–µ–≥–æ `GitLab` —ç–∫–∑–µ–º–ø–ª—è—Ä–∞  
3. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ
  -- –¥–∞–ª—å—à–µ –ø—Ä–æ—Å—Ç–æ –µ–Ω—Ç–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–¥–∞–≤–∞–ª–∞
5. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ Runner'–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "Linux Runner for project X".   
6. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ –¥–ª—è Runner'–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é), –µ—Å–ª–∏ –Ω—É–∂–Ω–æ. –¢–µ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ Runner'–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–∞–¥–∞—á–∞–º –≤ –≤–∞—à–µ–º CI/CD. –ø—Ä–∏–º–µ—Ä `tags: [bash]`     
7. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, —É–∫–∞–∑–∞—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞. 
8. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø executor'–∞. –°–∞–º—ã–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:  
*shell:* –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Runner.  (–≤—ã–±—Ä–∞–ª–∞ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç)  
*docker:* –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. 
–ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ docker, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞–∑, –Ω–∞–ø—Ä–∏–º–µ—Ä, alpine. 

</details>

<details>
<summary> –≤ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö </summary>

![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ –≤–∏—Ä—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã ](image/VM_network.png "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ –≤–∏—Ä—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã ")  
  
![—É—Å—Ç–∞–Ω–æ–≤–∫–∞ ssh –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —É–±—É–Ω—Ç—É](image/install_openSSH.png "—É—Å—Ç–∞–Ω–æ–≤–∫–∞ ssh –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —É–±—É–Ω—Ç—É")  
  
![–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–ª—É–∂–±—ã sshd](image/Error_sshd.png "–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–ª—É–∂–±—ã sshd")  
  
![–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±—ã sshd](image/status_sshd.png "–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±—ã sshd")  
  
![—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ sshd](image/ssh_doing_result.png "—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ sshd")  
  
![—É—Å—Ç–∞–Ω–æ–≤–∫–∞ gitlab-runner](image/install_gitlab_runner.png "—É—Å—Ç–∞–Ω–æ–≤–∫–∞ gitlab-runner")  
  
![—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è gitlab-runner](image/runner_register.png.png "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è gitlab-runner")  



</details>


<details>
<summary> –∫–æ–º–Ω–¥—ã gitlab-runner </summary>
 
```bash
sudo systemctl status gitlab-runner  # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
 
gitlab-runner run # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤

gitlab-runner list # –°–ø–∏—Å–æ–∫ —Ä–∞–Ω–Ω–µ—Ä–æ–≤  

gitlab-runner verify # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–Ω–Ω–µ—Ä–æ–≤

gitlab-runner unregister --all-runners # –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤

gitlab-runner unregister --name ${name_runner} # –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–Ω–Ω–µ—Ä–∞

vim /etc/gitlab-runner/config.toml # –§–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ —Ä–∞–Ω–Ω–µ—Ä–æ–≤  
```

</details>


</details>

##  –°–±–æ—Ä–∫–∞


<details>
<summary> –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤ –ø–æ —Å–±–æ—Ä–∫–µ  </summary> 
 
–ù–∞–ø–∏—à–∏ —ç—Ç–∞–ø –¥–ª—è CI –ø–æ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ø–∞–ø–∫–∏*code-samples*DO.
–í —Ñ–∞–π–ª–µ `.gitlab-ci.yml` –¥–æ–±–∞–≤—å —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –º–µ–π–∫ —Ñ–∞–π–ª –∏–∑ –ø–∞–ø–∫–∏ *code-samples*.
–§–∞–π–ª—ã, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã), —Å–æ—Ö—Ä–∞–Ω–∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–æ —Å—Ä–æ–∫–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è 30 –¥–Ω–µ–π.

<details>
<summary> –¢–ï–û–†–ò–Ø </summary>
 
–°–∫—Ä–∏–ø—Ç *CI* –ø–∏—à–µ—Ç—Å—è –Ω–∞ *YAML*. `.gitlab-ci.yml` - —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∏—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –í –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –ø–∞–ø–∫–∞—Ö *GitLab* –µ–≥–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç.  

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–æ, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤ —Å–∞–º—É –æ–±–æ–ª–æ—á–∫—É `GitLab: Build -> Pipeline Editor`.  

> –ü–µ—Ä–µ–π–¥–µ–º –≤ Pipeline editor, –≤—ã–±–µ—Ä–µ–º –≤–µ—Ç–∫—É develop, –∏ –Ω–∞–∂–º–µ–º –∫–Ω–æ–ø–∫—É Configure pipeline. –ú—ã –ø–æ–ø–∞–¥–µ–º –≤ –æ–∫–Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞. –ü–æ –∏–¥–µ–µ, –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª–µ .gitlab-ci.yml –Ω–∞–ø—Ä—è–º—É—é. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ ‚Äì –æ–Ω —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤ yaml —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ, –∏ –∏–Ω–æ–≥–¥–∞ –¥–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏. –í –æ—Å—Ç–∞–ª—å–Ω–æ–º ‚Äì –¥–µ–ª–æ –≤–∫—É—Å–∞.  

–î–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ –≤–∞—à–∏—Ö Jobs, –∑–¥–µ—Å—å –µ—Å—Ç—å —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —Å—Ç–∞–¥–∏–∏ -stages. –ù–µ –±–æ–ª–µ–µ —á–µ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞. –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã pipeline ‚Äì –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∞—è —Å—Ç–∞–¥–∏—è –∏ –∫–∞–∫–∞—è jobs –≤ –Ω–µ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.  

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —à–∞–±–ª–æ–Ω–æ–≤ GitLab CI/CD (—É—Å—Ç–∞—Ä–µ–ª–æ)
https://docs.gitlab.com/ee/development/cicd/templates.html

</details>

<details>
<summary> –ø—Ä–æ—Å—Ç–æ–π yaml –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ pipeline - passed  </summary>

```yaml
stages:
  - build

build_job:
  stage: build
  script:
    - echo "Running."
```

![–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω ](image/Pipline_OK.png "–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–π–ø–ª–∞–π–Ω–∞ ")  
![–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ](image/Jobs_OK2.png "–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ")  
![–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ](image/Jobs_OK.png "–£–°–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ ")  
</details>

–ß—Ç–æ –±—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –ø–π–ø–ª–∞–π–Ω—ã —Å make –Ω–∞–¥–æ –Ω–∞ –º–∞—à–∏–Ω—É –≥–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–∞–Ω–Ω–µ—Ä  —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å gcc `sudo apt -y install build-essential`

<details>
<summary> –ø—Ä–æ—Å—Ç–æ–π yaml —Å–≥–µ—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–π AI  </summary>

<details>
<summary> —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã </summary>

![—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø–π–ø–ª–∞–π–Ω–∞ ](image/Jobs_artifacts.png "—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø–π–ø–ª–∞–π–Ω–∞")  
![—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞—Ä—Ç–∏—Ñ–∞–∫—Ç—ã ](image/artifacts.png "—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∞—Ä—Ç–∏—Ñ–∞–∫—Ç—ã ")  

</details>

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ `.gitlab-ci.yml` —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ make –∏–∑ –ø–∞–ø–∫–∏ *code-samples*, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç—Ç–∞–ø –∏ –∑–∞–¥–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª `.gitlab-ci.yml`, —É–∫–∞–∑–∞–≤ –∫–æ–º–∞–Ω–¥—É `make` –≤–Ω—É—Ç—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:   
```yaml
default:
   # tags: [bash] #–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–Ω–µ—Ä–∞ –±–∞–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ–≥–∏

stages:          
  - build

# –≠—Ç–æ –∑–∞–¥–∞–Ω–∏–µ(job) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ(stage) —Å–±–æ—Ä–∫–∏(build),
# –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º.
build-job:       
  stage: build
  script:
    - mkdir -p my_artifacts # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    - cd code-samples/ && make && echo " ‚úÖ build completed"
    - cd .. && cp code-samples/DO my_artifacts

  artifacts:
    paths:
      - my_artifacts/ # –ò–ª–∏ my_artifacts.zip
      - echo " ‚úÖ artifacts saved"
    expire_in: 30 days # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è

```

–ü–æ—è—Å–Ω–µ–Ω–∏—è:
> **stages:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ç–∞–ø–æ–≤ –∫–æ–Ω–≤–µ–π–µ—Ä–∞. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç—Ç–∞–ø ‚Äî build.  
> **build_job:** –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è —Å–±–æ—Ä–∫–∏.  
>  **stage: build:** –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –∫ —ç—Ç–∞–ø—É build.   
>  **script:** –°–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.  
> **artifacts:** –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–µ–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –≤ –∑–∞–¥–∞–Ω–∏–∏  
> **paths:** –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã. –í –ø—Ä–∏–º–µ—Ä–µ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ my_artifacts/  
> **expire_in:** 30 days: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤ –¥–Ω—è—Ö. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–µ–Ω 30 –¥–Ω—è–º, –Ω–æ —ç—Ç–æ —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ GitLab  



</details>

</details>

##   –¢–µ—Å—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞

<details>
<summary> –û–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ  –∫–æ–¥—Å—Ç–∞–π–ª–∞ </summary> 

—ç—Ç–∞–ø –¥–ª—è CI, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞ (clang-format)  
–ï—Å–ª–∏ –∫–æ–¥—Å—Ç–∞–π–ª –Ω–µ –ø—Ä–æ—à–µ–ª, —Ç–æ ¬´–∑–∞—Ñ–µ–π–ª–∏¬ª –ø–∞–π–ø–ª–∞–π–Ω  
–í –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏ –≤—ã–≤–æ–¥ —É—Ç–∏–ª–∏—Ç—ã clang-format  

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º clang-format
sudo apt-get update && apt-get install -y clang-format 
```

<details>
<summary> –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ñ–∞–π–ª yaml –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∏–ª—è </summary>
 
```yaml
style-job:
    stage: clang-format
    script:
        - cp materials/linters/.clang-format  code-samples/
        - clang-format -n --Werror --verbose code-samples/*.c
        - echo " ‚úÖ style test completed"
    allow_failure: false
```
–ï—Å–ª–∏ –∫–æ–¥—Å—Ç–∞–π–ª –Ω–µ –ø—Ä–æ—à–µ–ª, —Ç–æ "–∑–∞—Ñ–µ–π–ª–∏—Ç—å" –ø–∞–π–ø–ª–∞–π–Ω
(–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ --Werror)
–í –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—ã–≤–æ–¥ —É—Ç–∏–ª–∏—Ç—ã clang-format (--verbose)

</details>

</details>

##   –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

<details>
<summary> —à–∞–≥–∏ –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é </summary>
 
–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –ø–∞–ø–∫–∏ *code-samples* –Ω–∞–ø–∏—à–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.  
–¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –µ–≥–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö.  
–ó–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —ç—Ç–∞–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, –µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç –∫–æ–¥—Å—Ç–∞–π–ª–∞ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ.  
–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏, —Ç–æ ¬´–∑–∞—Ñ–µ–π–ª–∏¬ª –ø–∞–π–ø–ª–∞–π–Ω.  
> –í –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏ –≤—ã–≤–æ–¥, —á—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ / –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å.

 
<details>
<summary> –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ñ–∞–π–ª yaml –ø—Ä–æ–≤–µ—Ä–∫—É </summary>

 
```yaml
test-job:
    stage: test
    needs: ["build-job", "style-job"]
    script:
        - cd code-samples/
        - test=$(make test)                 
        - if [[ $(echo $test | grep -c 'FAIL') -ne 0 ]]; then echo " üí• test FAIL" ; exit 1; else echo " ‚úÖ run test completed"; fi
    allow_failure: false
```
–ü–æ—è—Å–Ω–µ–Ω–∏—è:
> –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `test` –ø–æ–ø–∞–¥–µ—Ç –≤–µ—Å—å –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å `echo $test`)
> `$(echo $test | grep -c 'FAIL')` - –§–ª–∞–≥ `-c` –ø–æ–¥–∞–≤–ª—è–µ—Ç –≤—ã–≤–æ–¥ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1 - —Å–∏–º–≤–æ–ª –Ω–∞–π–¥–µ–Ω, –∏ 0, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω  
> **Needs** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤. –ü–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ—Ç —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç, —ç—Ç–∞–ø —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –Ω–∞—á–Ω–µ—Ç—Å—è   
> **Allow_failure:** false —É–∫–∞–∑—ã–≤–∞—é –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞–π–ø–ª–∞–π–Ω –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –∏ –Ω–µ –ø–µ—Ä–µ—à–µ–ª –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø.

</details>

<details>
<summary> —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–º </summary>

 
```bash
#!/bin/bash

touch test.txt
echo "Bad number of arguments!" > test.txt
echo "Bad number!" >> test.txt
echo "Learning to Linux"  >> test.txt
echo "Learning to work with Network"  >> test.txt
echo "Learning to Monitoring"  >> test.txt
echo "Learning to extra Monitoring" >> test.txt
echo "Learning to Docker" >> test.txt
echo "Learning to CI/CD" >> test.txt
echo "Bad number!" >> test.txt

    ./DO > test1.txt
    ./DO 0 >> test1.txt
    ./DO 1 >> test1.txt
    ./DO 2 >> test1.txt
    ./DO 3 >> test1.txt
    ./DO 4 >> test1.txt
    ./DO 5 >> test1.txt
    ./DO 6 >> test1.txt
    ./DO bad >> test1.txt


    DIFF_RES="$(diff -s test.txt test1.txt )"
    if [ "$DIFF_RES" = "Files test.txt and test1.txt are identical" ]
    then
        echo "SUCCESS"
    else
        echo "FAIL"
    fi
    rm test.txt test1.txt


```

</details>

<details>
<summary> –í—ã–≤–æ–¥ –¥–∂–æ–±—ã </summary>

![–≤—ã–≤–æ–¥ –¥–∂–æ–±—ã —Å —É—Å–ø–µ—à–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏](image/test_job_Success.png "–≤—ã–≤–æ–¥ –¥–∂–æ–±—ã —Å —É—Å–ø–µ—à–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏")  
![–≤—ã–≤–æ–¥ –¥–∂–æ–±—ã —Å –∑–∞—Ñ–µ–ª–∏–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ ](image/test_job_fail.png "–≤—ã–≤–æ–¥ –¥–∂–æ–±—ã —Å –∑–∞—Ñ–µ–ª–∏–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ ")  

</details>

</details>


##  –≠—Ç–∞–ø –¥–µ–ø–ª–æ—è

<details>
<summary> –û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ –ø–æ –¥–µ–ø–ª–æ—é –∏ –Ω–∞—Å—Ç—Ä–æ–∫–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É 2 –º–∞—à–∏–Ω–∞–º–∏ </summary>

##### 1. –ü–æ–¥–Ω–∏–º–∏ –≤—Ç–æ—Ä—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É *Ubuntu Server 22.04 LTS*  
##### 2. –ù–∞–ø–∏—à–∏ —ç—Ç–∞–ø –¥–ª—è CD, –∫–æ—Ç–æ—Ä—ã–π ¬´—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç¬ª –ø—Ä–æ–µ–∫—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ  
##### 3. –ó–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —ç—Ç–∞–ø –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç—Ç–∞–ø—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ.
##### 4. –ù–∞–ø–∏—à–∏ bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `ssh` –∏ `scp` –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã), –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/usr/local/bin` –≤—Ç–æ—Ä–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã.  
> –¢—É—Ç —Ç–µ–±–µ –º–æ–≥—É—Ç –ø–æ–º–æ—á—å –∑–Ω–∞–Ω–∏—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ *DO2_LinuxNetwork*  

<details>
<summary> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –Ω–∞ –≤—Ç–æ—Ä–æ–π –º–∞—à–∏–Ω–µ </summary>

 —Ñ–∞–π–ª `etc/netplan/00-installer-config.yaml` —Å–æ–∑–¥–∞–µ—Ç—Å—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –ø–æ—Ç–æ–º  `sudo netplan apply` - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ—Å  –∏  –ø—Ä–æ–≤–µ—Ä–∫–∞  –∞–¥—Ä–µ—Å–æ–≤ –∫–æ–º–∞–Ω–¥–æ–π `ip a`  
![—Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ—Ç–∏ ](image/networt_deploy_machine.png "—Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–µ—Ç–∏")  

```bash
# –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ ssh
ssh d6@10.31.170.230
# –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è d6

```
</details>

<details>
<summary> –æ—Ä–∞–≥–Ω–∏–∑–æ–≤–∞—Ç—å —Å–æ–µ–¥–µ–Ω–∏–µ –ø–æ ssh </summary>
–í–∞–∂–Ω–æ–µ:  
> –û–±–º–µ–Ω ssh –∫–ª—é—á–∞–º–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ø–∞—Ä–æ–ª—è (https://internet-lab.ru/scp_ssh_nopass)  
 
`scp` (Secure CoPy) ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É `Linux`-—Å–∏—Å—Ç–µ–º–∞–º–∏ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `SSH`. –û–Ω–∞ –≤—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–∞–≤ `OpenSSH`, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É—Ç–∏–ª–∏—Ç–æ–π –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ü–û  

```bash
# –Ω–∞ —Å–µ–≤–µ—Ä–µ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–æ–∑–¥–∞–µ–º –ø–∞—Ä—É –∫–ª—é—á–µ–π
ssh-keygen
# –ø–µ—Ä–µ–¥–∞–µ–º –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –º–∞—à–∏–Ω–µ –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ–º –¥–µ–ø–ª–æ–∏—Ç—å
scp ~/.ssh/id_rsa.pub d6@10.31.170.230:~/.ssh/authorized_keys
# –Ω–∞ d6 –≤ –ø–∞–ø–∫–µ .ssh –µ—Å—Ç—å —Ñ–∞–π–ª authorized_keys
ls .ssh
# –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–∞—Ä–æ–ª—è –ø–æ –∫–æ–º–∞–Ω–¥–µ –¥–æ–ª–∂–Ω—ã –ø–æ–¥–ª—é—á–∏—Ç—å—Å—è –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ssh d6@10.31.170.230
# —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º gitlab-runner
# —Ç–æ –Ω–∞–º –Ω–∞–¥–æ —ç—Ç–æ—Ç –∫–ª—é—á –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
# –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é gitlab-runner
# –∫–æ–ø–∏—Ä—É–µ–º –≤—Å—é –ø–∞–ø–∫—É —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ, —Ç.–µ –≤—Å–µ —Ñ–∞–π–ª—ã –≤–Ω–µ–π —Ç–æ–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
sudo cp -r /home/f6/.ssh/ /home/gitlab-runner/
# –ö—Ä–æ–º–µ —Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞–¥–æ –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –ø–∞–ø–∫–µ
# –ø—Ä–∞–≤–∞ –≤—ã–¥–≤–∞–µ–º —Ç–∞–∫ –∂–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
sudo chown -R gitlab-runner /home/gitlab-runner/.ssh

```

</details>

<details>
<summary> bash-—Å–∫—Ä–∏–ø—Ç </summary>
GitLab Runner –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /home/gitlab-runner/cache/ –≤ –¥–æ–º–∞—à–Ω–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç Runner'–æ–º, –æ–¥–Ω–∞–∫–æ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —Ç–∏–ø–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (executor). –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –ø—É—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ GitLab Runner'–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. 
–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Ç–æ—á–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Runner'–∞: –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ GitLab Runner'–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –ø—É—Ç—å, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É: –ó–∞–π–¥–∏—Ç–µ –Ω–∞ –º–∞—à–∏–Ω—É, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω GitLab Runner, –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –∫—ç—à–µ–º.
–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: –ï—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ GitLab –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è. 

 ```bash
#!/bin/bash

MACHINE=d6@10.31.170.230:/usr/local/bin
**
DIR=$(find /home/gitlab-runner/ -type d -name my_artifacts)

scp $DIR/* $MACHINE

```
–Ω–∞ –º–∞—à–∏–Ω–µ –ø—Ä–∏–µ–º–Ω–∏–∫–µ —Ñ–∞–π–ª–∞ –Ω–∞–¥–æ –±—É–¥–µ—Ç –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É /usr/local/bin
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –∫–æ–º–∞–Ω–¥–æ–π `ls -l /usr/local` 
–≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –∫–æ–º–∞–Ω–¥–æ–π `sudo chown -R d6 /usr/local/bin`

</details>

##### 5. –í —Ñ–∞–π–ª–µ `.gitlab-ci.yml` –¥–æ–±–∞–≤—å —ç—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.


<details>
<summary> yaml </summary>
 
 ```yaml

deploy-job:
    stage: deploy
    needs: ["build-job", "style-job", "test-job"]
    script:
        - echo "üöÄ –ó–∞–ø—É—Å–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—Ä—É—á–Ω—É—é"
        - bash deploy_script.sh
    when: manual # –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–µ–ª–∞–µ—Ç —ç—Ç–∞–ø —Ä—É—á–Ω—ã–º

```

–ü–æ—è—Å–Ω–µ–Ω–∏—è:
> when: manual: –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä. –û–Ω —Å–æ–æ–±—â–∞–µ—Ç GitLab, —á—Ç–æ —ç—Ç–æ—Ç —ç—Ç–∞–ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –≤—Ä—É—á–Ω—É—é, –∞ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

</details>

![–ó–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —ç—Ç–∞–ø –≤—Ä—É—á–Ω—É—é  ](image/run_job_manual.png "–ó–∞–ø—É—Å—Ç–∫  —ç—Ç–∞–ø–∞ –≤—Ä—É—á–Ω—É—é  ")  

–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ ¬´–∑–∞—Ñ–µ–π–ª–∏¬ª –ø–∞–π–ø–ª–∞–π–Ω.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç—ã –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å –≥–æ—Ç–æ–≤–æ–µ –∫ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ø–∞–ø–∫–∏*code-samples*(DO) –Ω–∞ –≤—Ç–æ—Ä–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

–°–æ—Ö—Ä–∞–Ω–∏ –¥–∞–º–ø—ã –æ–±—Ä–∞–∑–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω.

</details>

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º/–Ω–µ—É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ —Å –∏–º–µ–Ω–µ–º ¬´[—Ç–≤–æ–π nickname] DO6 CI/CD¬ª –≤ Telegram.

–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–∞–∫ —ç—Ç–∞–ø–∞ CI, —Ç–∞–∫ –∏ —ç—Ç–∞–ø–∞ CD.
–í –æ—Å—Ç–∞–ª—å–Ω–æ–º —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º.


<details>
<summary> —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ—Ç–∞  </summary>

 
@BotFather ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –±–æ—Ç Telegram, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º–∏ –±–æ—Ç–∞–º–∏.  
–° –µ–≥–æ –ø–æ–º–æ—â—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –±–æ—Ç–æ–≤, –∏–∑–º–µ–Ω—è—Ç—å –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∞–≤–∞—Ç–∞—Ä–∫—É, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (–∫–ª—é—á) –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.  

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ BotFather:  
**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ—Ç–æ–≤:** –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–æ—Ç –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –Ω–µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –∏ –ª–æ–≥–∏–Ω, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–π—Å—è –Ω–∞ "_bot"  
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:** –î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∞–≤–∞—Ç–∞—Ä–∫—É –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã  
**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç API-—Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –∫–ª—é—á–æ–º –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏  
**–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏:** –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /mybots –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤–∞–º–∏ –±–æ—Ç–æ–≤ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º   

> –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ *BotFather*:  
> –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: –í–≤–µ–¥–∏—Ç–µ `@BotFather` –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ *Telegram*  
> –ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥: –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å *BotFather* –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`, –∞ –∑–∞—Ç–µ–º `/newbot`  
> –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –ª–æ–≥–∏–Ω: –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º *BotFather*, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –∏–º—è –±–æ—Ç–∞ –∏ –µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –æ–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ **_bot** 
> –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω: –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ BotFather –≤—ã–¥–∞—Å—Ç –≤–∞–º API-—Ç–æ–∫–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º  

–ü–æ–¥—Ä–æ–±–Ω–æ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –æ–ø–∏—Å–∞–Ω–æ –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å id –±–æ—Ç–∞
https://sitogon.ru/blog/252-kak-sozdat-telegram-bot-poluchit-ego-token-i-chat-id

</details>

<details>
<summary> –æ–ø–∏—Å–∞–Ω–∏–µ  yaml </summary>
 
 ```yaml

notify-job:
    stage: notify
    script:
      - bash notify.sh

```


</details>

<details>
<summary> –æ–ø–∏—Å–∞–Ω–∏–µ  notify.sh </summary>

  
 ```bash
#!/bin/bash
  SUCCESS=" ‚úÖ  $CI_JOB_NAME  - $CI_JOB_ID  - $CI_JOB_STATUS  "
  FAIL="‚ùå  $CI_JOB_NAME ---------- ---------- $CI_JOB_URL "

  TOKEN=7971**5977:AAHF*2*p_Fdimtf9amz8ge-*n*_snBTvUmA
  ID_CHAT=5142*9108

if [[ $CI_JOB_NAME == "notify-job" ]]; then
     MESSAGE=" –ó–∞–ø—É—Å–∫ CI/CD –¥–ª—è –≤–µ—Ç–∫–∏ $CI_COMMIT_BRANCH
               ... –ü–∞–π–ø–ª–∞–π–Ω $CI_PIPELINE_ID
               ... $CI_COMMIT_AUTHOR
               :: $CI_COMMIT_MESSAGE
               CI_SERVER_NAME - $CI_SERVER_NAME"

      else
      if [[ $CI_JOB_STATUS == "success" ]]; then
        MESSAGE=$SUCCESS
      else
        MESSAGE=$FAIL
      fi

fi
curl -X POST "https://api.telegram.org/bot$TOKEN/sendMessage" -d chat_id=$ID_CHAT -d text="$MESSAGE"
```
</details>

<details>
<summary> –°–∫—Ä–∏–Ω—à–æ—Ç—ã </summary>

![–Ω–∞—á–∞–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ ](image/telegram_bot1.png "–Ω–∞—á–∞–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ ")  
![–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã ](image/telegram_bot2.png "–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã ")  

</details>



</details>
